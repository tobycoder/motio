{% extends "base.html" %}
{% block content %}
<main class="max-w-3xl mx-auto px-4 py-8">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-semibold text-gray-900">{{ title or 'Profiel bewerken' }}</h1>
      <p class="text-sm text-gray-500">{{ subtitle or 'Werk je gegevens bij en voeg eventueel een profielfoto toe.' }}</p>
    </div>
  </div>

  <form method="post" enctype="multipart/form-data" class="space-y-6 bg-white p-6 rounded-xl shadow border border-gray-200">
    {{ form.hidden_tag() }}

    <div class="flex items-center gap-4">
      {% if user.profile_src %}
        <img src="{{ user.profile_src }}" alt="Profielfoto van {{ user.naam }}" class="h-20 w-20 rounded-full object-cover border border-gray-200">
      {% else %}
        <div class="h-20 w-20 rounded-full bg-gray-100 border border-dashed border-gray-300 flex items-center justify-center text-gray-400 text-xs text-center">
          Geen foto
        </div>
      {% endif %}
      <p class="text-sm text-gray-500">Upload een nieuwe profielfoto of vul een URL in. Een upload overschrijft een bestaande URL.</p>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.naam.id }}">Naam</label>
      {{ form.naam(class="w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900") }}
      {% if form.naam.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.naam.errors[0] }}</p>
      {% endif %}
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.email.id }}">E-mail</label>
      {{ form.email(class="w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900") }}
      {% if form.email.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.email.errors[0] }}</p>
      {% endif %}
    </div>

    {% if form.show_admin_fields %}
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.role.id }}">Rol</label>
        {{ form.role(class="w-full bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5") }}
        {% if form.role.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.role.errors[0] }}</p>
        {% endif %}
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.partij.id }}">Partij</label>
        {{ form.partij(class="w-full bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5") }}
        {% if form.partij.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.partij.errors[0] }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.profile_url.id }}">Profielfoto URL</label>
      {{ form.profile_url(class="w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900", placeholder="https://voorbeeld.nl/afbeelding.jpg") }}
      {% if form.profile_url.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.profile_url.errors[0] }}</p>
      {% endif %}
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1" for="{{ form.profile_file.id }}">Upload profielfoto</label>
      {{ form.profile_file(class="block w-full text-sm text-gray-600 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 file:mr-4 file:cursor-pointer file:px-4 file:py-2 file:rounded-md file:border-0 file:bg-gray-900 file:text-white hover:file:bg-black") }}
      {% if form.profile_file.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.profile_file.errors[0] }}</p>
      {% endif %}
    </div>

    <div class="flex items-center gap-3">
      <button type="submit" class="inline-flex items-center px-4 py-2 rounded-md bg-gray-900 text-white hover:bg-black transition">
        Opslaan
      </button>
      <a href="{{ cancel_url or url_for('gebruikers.view_profiel') }}" class="inline-flex items-center px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 transition">
        Annuleren
      </a>
    </div>
  </form>
</main>
{% endblock %}

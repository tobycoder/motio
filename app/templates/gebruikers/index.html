{% extends 'base.html' %}
{% block content %}

{# Sticky header + acties #}
<div class="sticky top-0 z-10 bg-white/80 backdrop-blur border-b print:hidden">
  <div class="mx-auto max-w-7xl px-4 py-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <h1 class="text-xl md:text-2xl font-semibold">Overzicht van {{ title }}</h1>
    <div class="flex flex-wrap gap-2">
      <a href="{{ url_for('dashboard.home') }}" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white">
        Terug naar dashboard
      </a>
      <a href="{{ url_for('gebruikers.toevoegen') }}" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700">
        Nieuwe gebruiker
      </a>
    </div>
  </div>
</div>

{# Filters: responsive grid #}
<form method="get" class="mx-auto max-w-7xl px-4 mt-6">
  <div class="rounded-xl border border-gray-200 shadow-sm p-4">
    <h3 class="text-base font-semibold mb-3">Filter</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
      <div class="md:col-span-2">
        <input class="w-full h-10 px-4 text-sm border border-slate-200 rounded focus:outline-none focus:border-slate-400 shadow-sm" type="search" name="q" placeholder="Zoeken..." value="{{ q or '' }}">
      </div>
    </div>
    <div class="mt-3 flex justify-end">
      <button type="submit" class="inline-flex items-center px-4 py-2 rounded-md bg-gray-900 text-white hover:bg-black">Filter</button>
    </div>

    {# Sorteerwaarden behouden #}
    <input type="hidden" name="sort" value="{{ sort }}">
    <input type="hidden" name="dir" value="{{ direction }}">
  </div>
</form>

{# Tabel + bulk export #}
  <div class="overflow-x-auto max-w-7xl mx-auto rounded-xl border border-gray-200 shadow-sm">
    <table class="min-w-full text-sm text-left text-gray-700 dark:text-gray-300">
      <thead class="text-xs uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
        <tr>
          <th class="px-2 py-3">
            Profielfoto
          </th>
          <th class="px-2 py-3 hidden md:table-cell">
            Naam
          </th>
          <th class="px-2 py-3 hidden lg:table-cell">E-mail</th>
          <th class="px-2 py-3 hidden lg:table-cell">Partij</th>
        </tr>
      </thead>
      <tbody>
        {% for m in users %}
          <tr class="bg-white border-b border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-600">
            <td class="px-2 py-4 font-medium text-blue-600 dark:text-blue-400 hover:underline whitespace-nowrap">
              <a href="{{ url_for('gebruikers.bekijken', user_id=m.id) }}"><img src="{{ m.profile_src }}" class="h-8 w-auto rounded"></a>
              {# Compacte meta op mobiel #}
              <div class="mt-1 text-xs text-gray-500 md:hidden">
                {{ m.created_at.strftime('%d-%m-%Y') if m.created_at else '' }} â€¢ {{ m.partij.naam if m.partij.naam else '-' }}
              </div>
            </td>
            <td class="px-2 py-4 font-medium text-blue-600 dark:text-blue-400 hover:underline whitespace-nowrap">
              <a href="{{ url_for('gebruikers.bekijken', user_id=m.id) }}">{{ m.naam }}</a>
            </td>
            <td class="px-2 py-4 hidden md:table-cell">
              {{ m.email }}
            </td>
            <td class="px-2 py-4 hidden lg:table-cell">
              {{ m.partij.naam if m.partij.naam else '-' }}
            </td>
          </tr>
        {% endfor %}
        {% if not users %}
          <tr><td class="px-6 py-6 text-sm text-gray-500" colspan="5">Geen resultaten.</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>

{% endblock %}
